<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker Pro - Complete App</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Sora:wght@400;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00d4ff;
            --primary-dark: #0099cc;
            --secondary: #6366f1;
            --accent: #f97316;
            --dark-bg: #0a0e27;
            --dark-surface: #1a1f3a;
            --dark-surface-light: #242d4a;
            --text-primary: #f5f7fa;
            --text-secondary: #94a3b8;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #0f1a35 50%, #1a0a2e 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(0, 212, 255, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 80% 20%, rgba(99, 102, 241, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 40% 40%, rgba(249, 115, 22, 0.05) 0%, transparent 40%);
            pointer-events: none;
            z-index: -1;
            animation: gradientShift 15s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        /* ==================== SHARED STYLES ==================== */
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .view {
            display: none;
            animation: fadeInView 0.5s ease-out;
        }

        .view.active {
            display: block;
        }

        @keyframes fadeInView {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ==================== AUTH STYLES ==================== */
        .auth-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .auth-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1.5px solid rgba(0, 212, 255, 0.2);
            padding: 50px;
            border-radius: 20px;
            width: 100%;
            max-width: 500px;
            animation: slideUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .auth-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: all 0.4s;
        }

        .auth-card:hover::before {
            opacity: 1;
            top: -25%;
            right: -25%;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            z-index: 1;
        }

        .auth-logo-icon {
            font-size: 3.5em;
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .auth-logo h1 {
            font-family: 'Sora', sans-serif;
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .auth-logo p {
            color: var(--text-secondary);
            font-size: 0.95em;
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 1.5px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            font-size: 1em;
            transition: all 0.3s;
        }

        .form-group input::placeholder {
            color: var(--text-secondary);
        }

        .form-group input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .form-error {
            color: var(--danger);
            font-size: 0.85em;
            margin-top: 8px;
            display: none;
        }

        .form-error.show {
            display: block;
            animation: shake 0.4s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .submit-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            font-size: 1em;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 212, 255, 0.4);
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .form-footer {
            text-align: center;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .form-footer p {
            font-size: 0.9em;
        }

        .form-footer a,
        .form-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            cursor: pointer;
        }

        .form-footer a:hover,
        .form-link:hover {
            color: var(--secondary);
            text-decoration: underline;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            background: transparent;
            border: none;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            margin-bottom: 30px;
            transition: all 0.3s;
            position: relative;
            z-index: 1;
        }

        .back-btn:hover {
            gap: 12px;
            color: var(--secondary);
        }

        .success-message {
            background: rgba(16, 185, 129, 0.1);
            border: 1.5px solid rgba(16, 185, 129, 0.5);
            color: var(--success);
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: none;
            animation: slideDown 0.3s ease-out;
            position: relative;
            z-index: 1;
        }

        .success-message.show {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .password-strength {
            margin-top: 10px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            display: none;
            position: relative;
            z-index: 1;
        }

        .password-strength.show {
            display: block;
        }

        .password-strength-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--danger) 0%, var(--warning) 50%, var(--success) 100%);
            transition: width 0.3s;
        }

        .dashboard-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1.5px solid rgba(0, 212, 255, 0.2);
            padding: 50px;
            border-radius: 20px;
            width: 100%;
            max-width: 600px;
            animation: slideUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
            margin: 0 auto;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            position: relative;
            z-index: 1;
        }

        .dashboard-header h1 {
            font-family: 'Sora', sans-serif;
            font-size: 2em;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logout-btn {
            padding: 10px 25px;
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(239, 68, 68, 0.4);
        }

        .user-info {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        .user-info-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0, 212, 255, 0.1);
        }

        .user-info-item:last-child {
            border-bottom: none;
        }

        .user-info-label {
            color: var(--text-secondary);
            font-weight: 600;
        }

        .user-info-value {
            color: var(--primary);
            font-weight: 700;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            position: relative;
            z-index: 1;
        }

        .action-btn {
            padding: 15px;
            background: rgba(0, 212, 255, 0.1);
            border: 1.5px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            cursor: pointer;
            color: var(--primary);
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.85em;
        }

        .action-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        /* ==================== TRACKER STYLES ==================== */
        .tracker-header {
            text-align: center;
            margin-bottom: 50px;
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tracker-header h1 {
            font-family: 'Sora', sans-serif;
            font-size: 3.5em;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
        }

        .tracker-header p {
            font-size: 1.15em;
            color: var(--text-secondary);
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .tracker-header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .user-greeting {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .user-greeting p {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .user-greeting h2 {
            color: var(--primary);
            font-size: 1.3em;
        }

        .logout-header-btn {
            padding: 10px 25px;
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s;
        }

        .logout-header-btn:hover {
            transform: translateY(-2px);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 255, 0.2);
            padding: 30px;
            border-radius: 20px;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            animation: slideUp 0.8s ease-out;
            animation-fill-mode: both;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.4s;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(0, 212, 255, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.15);
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.85em;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 2.8em;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .stat-subtext {
            color: var(--text-secondary);
            font-size: 0.9em;
            font-weight: 300;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 50px;
            flex-wrap: wrap;
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .controls input {
            flex: 1;
            min-width: 250px;
            padding: 16px 22px;
            background: rgba(255, 255, 255, 0.05);
            border: 1.5px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: 'Outfit', sans-serif;
            font-size: 1em;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .controls input::placeholder {
            color: var(--text-secondary);
        }

        .controls input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .controls button {
            padding: 16px 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        .controls button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 212, 255, 0.4);
        }

        .section-title {
            font-family: 'Sora', sans-serif;
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 30px;
            color: var(--text-primary);
            animation: fadeInDown 0.8s ease-out 0.3s both;
        }

        .habits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 25px;
            animation: fadeInUp 0.8s ease-out 0.4s both;
        }

        .habit-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1.5px solid rgba(0, 212, 255, 0.2);
            padding: 35px;
            border-radius: 20px;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            position: relative;
            overflow: hidden;
        }

        .habit-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: all 0.4s;
        }

        .habit-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 212, 255, 0.5);
            transform: translateY(-8px);
            box-shadow: 0 30px 60px rgba(0, 212, 255, 0.2);
        }

        .habit-card:hover::before {
            opacity: 1;
            top: -25%;
            right: -25%;
        }

        .habit-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .habit-name {
            font-family: 'Sora', sans-serif;
            font-size: 1.6em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .habit-stats-row {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .habit-stat {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .habit-stat-label {
            color: var(--text-secondary);
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .habit-stat-value {
            font-size: 1.8em;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-container {
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .progress-label {
            color: var(--text-secondary);
            font-size: 0.9em;
            font-weight: 500;
        }

        .progress-percentage {
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-bar-container {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 10px;
            animation: progressFill 1s ease-out;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        @keyframes progressFill {
            from { width: 0; }
        }

        .year-grid-container {
            margin-top: 35px;
            position: relative;
            z-index: 1;
        }

        .year-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
        }

        .month-column {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(0, 212, 255, 0.15);
            padding: 20px;
            border-radius: 15px;
            transition: all 0.3s;
        }

        .month-column:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .month-header {
            font-weight: 700;
            font-size: 0.95em;
            margin-bottom: 15px;
            color: var(--primary);
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
        }

        .day-cell {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.2s cubic-bezier(0.23, 1, 0.320, 1);
            position: relative;
        }

        .day-cell:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.6);
            transform: scale(1.15);
            box-shadow: 0 8px 20px rgba(0, 212, 255, 0.3);
        }

        .day-cell.completed {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-color: var(--primary);
            color: white;
            font-weight: 700;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.6);
            animation: popIn 0.4s cubic-bezier(0.23, 1, 0.320, 1);
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .day-cell.completed::after {
            content: '‚úì';
            position: absolute;
            font-size: 0.9em;
        }

        .habit-actions {
            display: flex;
            gap: 12px;
            position: relative;
            z-index: 1;
        }

        .action-btn-habit {
            flex: 1;
            padding: 12px 16px;
            border: 1.5px solid;
            background: transparent;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            font-size: 0.9em;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .reset-btn {
            border-color: rgba(99, 102, 241, 0.5);
            color: var(--secondary);
        }

        .reset-btn:hover {
            background: rgba(99, 102, 241, 0.2);
            border-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
        }

        .delete-btn {
            border-color: rgba(239, 68, 68, 0.5);
            color: var(--danger);
        }

        .delete-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--danger);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
        }

        .no-habits {
            text-align: center;
            padding: 80px 40px;
            animation: fadeIn 0.8s ease-out 0.5s both;
        }

        .no-habits-icon {
            font-size: 4em;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        .no-habits-text {
            font-size: 1.3em;
            color: var(--text-secondary);
            font-weight: 300;
        }

        .footer {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.95em;
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid rgba(0, 212, 255, 0.1);
            animation: fadeIn 0.8s ease-out 0.6s both;
        }

        @media (max-width: 768px) {
            .tracker-header h1 { font-size: 2.2em; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .controls { flex-direction: column; }
            .controls input, .controls button { width: 100%; }
            .habits-grid { grid-template-columns: 1fr; }
            .auth-card { padding: 30px; }
            .action-buttons { grid-template-columns: 1fr; }
            .tracker-header-top { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>
    <!-- ==================== AUTH VIEWS ==================== -->
    <div id="loginView" class="view active">
        <div class="auth-container">
            <div class="auth-card">
                <div class="auth-logo">
                    <div class="auth-logo-icon">üîê</div>
                    <h1>Welcome Back</h1>
                    <p>Sign in to continue your habit journey</p>
                </div>

                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="success-message" id="loginSuccess"></div>

                    <div class="form-group">
                        <label for="loginEmail">Email Address</label>
                        <input type="email" id="loginEmail" name="email" placeholder="you@example.com" required>
                        <div class="form-error" id="loginEmailError"></div>
                    </div>

                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                        <div class="form-error" id="loginPasswordError"></div>
                    </div>

                    <button type="submit" class="submit-btn">Sign In</button>

                    <div class="form-footer">
                        <p>Don't have an account? <a onclick="switchView('signupView')">Sign Up</a></p>
                        <p><a onclick="switchView('forgotView')" style="font-size: 0.85em;">Forgot Password?</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="signupView" class="view">
        <div class="auth-container">
            <button class="back-btn" onclick="switchView('loginView')">‚Üê Back to Login</button>
            <div class="auth-card">
                <div class="auth-logo">
                    <div class="auth-logo-icon">‚ú®</div>
                    <h1>Create Account</h1>
                    <p>Start tracking your habits today</p>
                </div>

                <form id="signupForm" onsubmit="handleSignup(event)">
                    <div class="success-message" id="signupSuccess"></div>

                    <div class="form-group">
                        <label for="signupName">Full Name</label>
                        <input type="text" id="signupName" name="name" placeholder="John Doe" required>
                        <div class="form-error" id="signupNameError"></div>
                    </div>

                    <div class="form-group">
                        <label for="signupEmail">Email Address</label>
                        <input type="email" id="signupEmail" name="email" placeholder="you@example.com" required>
                        <div class="form-error" id="signupEmailError"></div>
                    </div>

                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required oninput="checkPasswordStrength()">
                        <div class="password-strength" id="passwordStrength">
                            <div class="password-strength-bar" id="passwordStrengthBar"></div>
                        </div>
                        <div class="form-error" id="signupPasswordError"></div>
                    </div>

                    <div class="form-group">
                        <label for="signupConfirm">Confirm Password</label>
                        <input type="password" id="signupConfirm" name="confirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                        <div class="form-error" id="signupConfirmError"></div>
                    </div>

                    <button type="submit" class="submit-btn">Create Account</button>

                    <div class="form-footer">
                        <p>Already have an account? <a onclick="switchView('loginView')">Sign In</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="forgotView" class="view">
        <div class="auth-container">
            <button class="back-btn" onclick="switchView('loginView')">‚Üê Back to Login</button>
            <div class="auth-card">
                <div class="auth-logo">
                    <div class="auth-logo-icon">üîë</div>
                    <h1>Reset Password</h1>
                    <p>We'll send you a link to reset your password</p>
                </div>

                <form id="forgotForm" onsubmit="handleForgot(event)">
                    <div class="success-message" id="forgotSuccess"></div>

                    <div class="form-group">
                        <label for="forgotEmail">Email Address</label>
                        <input type="email" id="forgotEmail" name="email" placeholder="you@example.com" required>
                        <div class="form-error" id="forgotEmailError"></div>
                    </div>

                    <button type="submit" class="submit-btn">Send Reset Link</button>

                    <div class="form-footer">
                        <p>Remember your password? <a onclick="switchView('loginView')">Sign In</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="dashboardView" class="view">
        <div class="auth-container">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h1>Dashboard</h1>
                    <button class="logout-btn" onclick="handleLogout()">Logout</button>
                </div>

                <div class="user-info">
                    <div class="user-info-item">
                        <span class="user-info-label">Name</span>
                        <span class="user-info-value" id="dashboardName">-</span>
                    </div>
                    <div class="user-info-item">
                        <span class="user-info-label">Email</span>
                        <span class="user-info-value" id="dashboardEmail">-</span>
                    </div>
                    <div class="user-info-item">
                        <span class="user-info-label">Member Since</span>
                        <span class="user-info-value" id="dashboardDate">-</span>
                    </div>
                    <div class="user-info-item">
                        <span class="user-info-label">Status</span>
                        <span class="user-info-value" id="dashboardStatus">Active ‚úì</span>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="action-btn" onclick="switchView('trackerView')">üéØ Open Tracker</button>
                    <button class="action-btn" onclick="handleChangePassword()">üîÑ Change Password</button>
                    <button class="action-btn" onclick="handleEditProfile()">‚úèÔ∏è Edit Profile</button>
                    <button class="action-btn" onclick="handleDeleteAccount()">üóëÔ∏è Delete Account</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== TRACKER VIEW ==================== -->
    <div id="trackerView" class="view">
        <div class="container">
            <!-- User Header -->
            <div class="tracker-header-top">
                <div class="user-greeting">
                    <p>Logged in as</p>
                    <h2 id="userDisplayName">User</h2>
                </div>
                <button class="logout-header-btn" onclick="handleLogoutFromTracker()">‚Üê Back to Dashboard</button>
            </div>

            <!-- Main Header -->
            <div class="tracker-header">
                <h1>üìÖ Habit Tracker Pro</h1>
                <p>Master your daily habits with elegant design and comprehensive analytics</p>
            </div>

            <!-- Stats Grid -->
            <div class="stats-grid" id="statsGrid"></div>

            <!-- Controls -->
            <div class="controls">
                <input type="text" id="habitName" placeholder="Add a new habit... (e.g., Exercise, Meditation, Reading)" onkeypress="if(event.key === 'Enter') addHabit()">
                <button onclick="addHabit()">+ Add Habit</button>
            </div>

            <!-- Habits Section -->
            <div>
                <h2 class="section-title">Your Habits</h2>
                <div id="habitsContainer" class="habits-grid"></div>
            </div>

            <!-- Footer -->
            <div class="footer">
                ‚ú® All data is automatically saved and protected in your browser
            </div>
        </div>
    </div>

    <script>
        // ==================== SHARED STATE ====================
        const usersDB = JSON.parse(localStorage.getItem('habitTrackerUsers')) || {};
        const currentYear = new Date().getFullYear();
        const habits = {};
        let progressChart = null;
        let completionChart = null;

        // ==================== INITIALIZATION ====================
        window.addEventListener('DOMContentLoaded', () => {
            const session = JSON.parse(localStorage.getItem('habitTrackerSession'));
            if (session && usersDB[session.email]) {
                loadHabitData(session.email);
                showDashboard();
            }
        });

        // ==================== AUTH FUNCTIONS ====================
        function switchView(viewId) {
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            document.getElementById(viewId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showError('loginEmailError', 'Please fill all fields');
                return;
            }

            if (!usersDB[email]) {
                showError('loginEmailError', 'Email not found');
                return;
            }

            if (usersDB[email].password !== hashPassword(password)) {
                showError('loginPasswordError', 'Incorrect password');
                return;
            }

            showSuccess('loginSuccess', 'Login successful!');
            setTimeout(() => {
                const session = {
                    email: email,
                    name: usersDB[email].name,
                    loginTime: new Date().toISOString()
                };
                localStorage.setItem('habitTrackerSession', JSON.stringify(session));
                loadHabitData(email);
                showDashboard();
            }, 1500);
        }

        function handleSignup(event) {
            event.preventDefault();
            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirm = document.getElementById('signupConfirm').value;

            if (!name || !email || !password || !confirm) {
                showError('signupNameError', 'Please fill all fields');
                return;
            }

            if (name.length < 3) {
                showError('signupNameError', 'Name must be at least 3 characters');
                return;
            }

            if (password.length < 8) {
                showError('signupPasswordError', 'Password must be at least 8 characters');
                return;
            }

            if (password !== confirm) {
                showError('signupConfirmError', 'Passwords do not match');
                return;
            }

            if (usersDB[email]) {
                showError('signupEmailError', 'Email already registered');
                return;
            }

            usersDB[email] = {
                name: name,
                email: email,
                password: hashPassword(password),
                createdAt: new Date().toISOString()
            };

            localStorage.setItem('habitTrackerUsers', JSON.stringify(usersDB));

            showSuccess('signupSuccess', 'Account created successfully!');
            setTimeout(() => {
                const session = {
                    email: email,
                    name: name,
                    loginTime: new Date().toISOString()
                };
                localStorage.setItem('habitTrackerSession', JSON.stringify(session));
                loadHabitData(email);
                showDashboard();
            }, 1500);
        }

        function handleForgot(event) {
            event.preventDefault();
            const email = document.getElementById('forgotEmail').value.trim();

            if (!email) {
                showError('forgotEmailError', 'Please enter your email');
                return;
            }

            if (!usersDB[email]) {
                showError('forgotEmailError', 'Email not found');
                return;
            }

            showSuccess('forgotSuccess', 'Password reset email sent!');
            setTimeout(() => {
                switchView('loginView');
                document.getElementById('forgotForm').reset();
            }, 2000);
        }

        function showDashboard() {
            const session = JSON.parse(localStorage.getItem('habitTrackerSession'));
            const user = usersDB[session.email];

            document.getElementById('dashboardName').textContent = user.name;
            document.getElementById('dashboardEmail').textContent = user.email;
            document.getElementById('dashboardDate').textContent = new Date(user.createdAt).toLocaleDateString();
            document.getElementById('userDisplayName').textContent = user.name;

            switchView('dashboardView');
        }

        function handleLogout() {
            if (confirm('Are you sure you want to logout?')) {
                const session = JSON.parse(localStorage.getItem('habitTrackerSession'));
                if (session) {
                    saveHabitData(session.email);
                }
                localStorage.removeItem('habitTrackerSession');
                document.getElementById('loginForm').reset();
                document.getElementById('signupForm').reset();
                switchView('loginView');
            }
        }

        function handleLogoutFromTracker() {
            const session = JSON.parse(localStorage.getItem('habitTrackerSession'));
            if (session) {
                saveHabitData(session.email);
                showDashboard();
            }
        }

        function handleChangePassword() {
            const newPassword = prompt('Enter new password (min 8 characters):');
            if (!newPassword) return;

            if (newPassword.length < 8) {
                alert('Password must be at least 8 characters');
                return;
            }

            const session = JSON.parse(localStorage.getItem('habitTrackerSession'));
            usersDB[session.email].password = hashPassword(newPassword);
            localStorage.setItem('habitTrackerUsers', JSON.stringify(usersDB));
            alert('Password changed successfully!');
        }

        function handleEditProfile() {
            const session = JSON.parse(localStorage.getItem('habitTrackerSession'));
            const newName = prompt('Enter new name:', usersDB[session.email].name);
            
            if (newName && newName.trim().length >= 3) {
                usersDB[session.email].name = newName.trim();
                session.name = newName.trim();
                localStorage.setItem('habitTrackerUsers', JSON.stringify(usersDB));
                localStorage.setItem('habitTrackerSession', JSON.stringify(session));
                document.getElementById('dashboardName').textContent = newName.trim();
                document.getElementById('userDisplayName').textContent = newName.trim();
                alert('Profile updated successfully!');
            }
        }

        function handleDeleteAccount() {
            if (confirm('Are you sure? This action cannot be undone.')) {
                if (confirm('This will permanently delete your account and all data. Continue?')) {
                    const session = JSON.parse(localStorage.getItem('habitTrackerSession'));
                    saveHabitData(session.email);
                    delete usersDB[session.email];
                    localStorage.setItem('habitTrackerUsers', JSON.stringify(usersDB));
                    localStorage.removeItem('habitTrackerSession');
                    alert('Account deleted successfully');
                    switchView('loginView');
                }
            }
        }

        // ==================== HABIT TRACKER FUNCTIONS ====================
        function loadHabitData(email) {
            const userHabits = localStorage.getItem(`habits_${email}`);
            if (userHabits) {
                Object.assign(habits, JSON.parse(userHabits));
            }
        }

        function saveHabitData(email) {
            localStorage.setItem(`habits_${email}`, JSON.stringify(habits));
        }

        function addHabit() {
            const input = document.getElementById('habitName');
            const habitName = input.value.trim();

            if (!habitName) {
                alert('Please enter a habit name');
                return;
            }

            if (habits[habitName]) {
                alert('This habit already exists');
                return;
            }

            habits[habitName] = {};
            input.value = '';
            saveAndRender();
        }

        function toggleDay(habitName, dayKey) {
            if (!habits[habitName]) return;

            if (habits[habitName][dayKey]) {
                delete habits[habitName][dayKey];
            } else {
                habits[habitName][dayKey] = true;
            }
            saveAndRender();
        }

        function deleteHabit(habitName) {
            if (confirm(`Are you sure you want to delete "${habitName}"?`)) {
                delete habits[habitName];
                saveAndRender();
            }
        }

        function resetHabit(habitName) {
            if (confirm(`Reset all progress for "${habitName}"?`)) {
                habits[habitName] = {};
                saveAndRender();
            }
        }

        function saveAndRender() {
            const session = JSON.parse(localStorage.getItem('habitTrackerSession'));
            if (session) {
                saveHabitData(session.email);
            }
            renderAll();
        }

        // ==================== RENDER FUNCTIONS ====================
        function getDaysInMonth(year, month) {
            return new Date(year, month + 1, 0).getDate();
        }

        function getMonthName(month) {
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                          'July', 'August', 'September', 'October', 'November', 'December'];
            return months[month];
        }

        function createHabitCard(habitName, completedDays) {
            const completed = Object.keys(completedDays).length;
            const percentage = Math.round((completed / 365) * 100);

            let yearGridHtml = '<div class="year-grid-container"><div class="year-grid">';

            for (let month = 0; month < 12; month++) {
                const monthName = getMonthName(month);
                const daysInMonth = getDaysInMonth(currentYear, month);
                
                yearGridHtml += `<div class="month-column">
                    <div class="month-header">${monthName.substring(0, 3)}</div>
                    <div class="days-grid">`;

                for (let day = 1; day <= daysInMonth; day++) {
                    const dayKey = day + '-' + (month + 1);
                    const isCompleted = completedDays[dayKey] ? 'completed' : '';
                    
                    yearGridHtml += `<div class="day-cell ${isCompleted}" 
                        onclick="toggleDay('${habitName}', '${dayKey}')"
                        title="${monthName} ${day}"></div>`;
                }

                yearGridHtml += `</div></div>`;
            }

            yearGridHtml += '</div></div>';

            return `
                <div class="habit-card">
                    <div class="habit-header">
                        <div class="habit-name">${habitName}</div>
                        <div class="habit-actions">
                            <button class="action-btn-habit reset-btn" onclick="resetHabit('${habitName}')">Reset</button>
                            <button class="action-btn-habit delete-btn" onclick="deleteHabit('${habitName}')">Delete</button>
                        </div>
                    </div>

                    <div class="habit-stats-row">
                        <div class="habit-stat">
                            <div class="habit-stat-label">Days Completed</div>
                            <div class="habit-stat-value">${completed}</div>
                        </div>
                        <div class="habit-stat">
                            <div class="habit-stat-label">Days Remaining</div>
                            <div class="habit-stat-value">${365 - completed}</div>
                        </div>
                        <div class="habit-stat">
                            <div class="habit-stat-label">Year Progress</div>
                            <div class="habit-stat-value">${percentage}%</div>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div class="progress-header">
                            <span class="progress-label">Annual Progress</span>
                            <span class="progress-percentage">${percentage}%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: ${percentage}%"></div>
                        </div>
                    </div>

                    ${yearGridHtml}
                </div>
            `;
        }

        function updateStats() {
            const statsGrid = document.getElementById('statsGrid');
            let totalHabits = Object.keys(habits).length;
            let totalCompleted = 0;
            let todayCompleted = 0;

            const today = new Date();
            const todayKey = today.getDate() + '-' + (today.getMonth() + 1);

            for (const habitName in habits) {
                totalCompleted += Object.keys(habits[habitName]).length;
                if (habits[habitName][todayKey]) {
                    todayCompleted++;
                }
            }

            const maxPossible = totalHabits * 365;
            const percentage = maxPossible > 0 ? Math.round((totalCompleted / maxPossible) * 100) : 0;

            statsGrid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-label">Active Habits</div>
                    <div class="stat-value">${totalHabits}</div>
                    <div class="stat-subtext">Habits in progress</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Completions</div>
                    <div class="stat-value">${totalCompleted}</div>
                    <div class="stat-subtext">Days marked done</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Today's Status</div>
                    <div class="stat-value">${todayCompleted}/${totalHabits}</div>
                    <div class="stat-subtext">Habits today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Year Progress</div>
                    <div class="stat-value">${percentage}%</div>
                    <div class="stat-subtext">Overall completion</div>
                </div>
            `;
        }

        function renderAll() {
            updateStats();

            const habitsContainer = document.getElementById('habitsContainer');

            if (Object.keys(habits).length === 0) {
                habitsContainer.innerHTML = `
                    <div class="no-habits">
                        <div class="no-habits-icon">üìù</div>
                        <div class="no-habits-text">Start building better habits today</div>
                    </div>
                `;
                return;
            }

            let html = '';
            for (const habitName in habits) {
                html += createHabitCard(habitName, habits[habitName]);
            }

            habitsContainer.innerHTML = html;
        }

        // ==================== UTILITY FUNCTIONS ====================
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.classList.add('show');
        }

        function showSuccess(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = '‚úì ' + message;
            element.classList.add('show');
        }

        function checkPasswordStrength() {
            const password = document.getElementById('signupPassword').value;
            const strengthBar = document.getElementById('passwordStrengthBar');
            const strengthDiv = document.getElementById('passwordStrength');

            if (password.length === 0) {
                strengthDiv.classList.remove('show');
                return;
            }

            strengthDiv.classList.add('show');

            let strength = 0;
            if (password.length >= 8) strength += 25;
            if (password.length >= 12) strength += 25;
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength += 25;
            if (/[0-9]/.test(password)) strength += 12.5;
            if (/[^a-zA-Z0-9]/.test(password)) strength += 12.5;

            strengthBar.style.width = Math.min(strength, 100) + '%';
        }

        function hashPassword(password) {
            return btoa(password);
        }

        // Auto-save on page unload
        window.addEventListener('beforeunload', () => {
            const session = JSON.parse(localStorage.getItem('habitTrackerSession'));
            if (session) {
                saveHabitData(session.email);
            }
        });
    </script>
</body>
</html>